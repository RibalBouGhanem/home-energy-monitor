{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Admin\\\\Desktop\\\\senior-project\\\\web-template-new\\\\frontend\\\\src\\\\components\\\\charts\\\\LineTimeChart.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useMemo, useRef } from \"react\";\nimport Chart from \"chart.js/auto\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction toTs(v) {\n  const t = new Date(v).getTime();\n  return Number.isFinite(t) ? t : null;\n}\nexport default function LineTimeChart({\n  id,\n  rows = [],\n  xKey = \"Timestamp\",\n  yKeys = [],\n  labels = {},\n  // optional: { yKey: \"Label\" }\n  chartRef // optional: ref passed from parent for hover sync later\n}) {\n  _s();\n  const canvasRef = useRef(null);\n  const prepared = useMemo(() => {\n    const safeRows = Array.isArray(rows) ? rows : [];\n    const data = safeRows.map(r => {\n      const x = r === null || r === void 0 ? void 0 : r[xKey];\n      const ts = toTs(x);\n      if (!ts) return null;\n      return {\n        ...r,\n        __ts: ts\n      };\n    }).filter(Boolean).sort((a, b) => a.__ts - b.__ts);\n    return data;\n  }, [rows, xKey]);\n  useEffect(() => {\n    if (!canvasRef.current) return;\n\n    // destroy existing chart if any\n    const existing = Chart.getChart(canvasRef.current);\n    if (existing) existing.destroy();\n    if (!prepared.length || !yKeys.length) return;\n    const datasets = yKeys.map(k => ({\n      label: labels[k] || k,\n      data: prepared.map(r => {\n        var _r$k;\n        return Number((_r$k = r === null || r === void 0 ? void 0 : r[k]) !== null && _r$k !== void 0 ? _r$k : null);\n      }),\n      spanGaps: true,\n      tension: 0.3,\n      pointRadius: 0\n    }));\n    const chart = new Chart(canvasRef.current, {\n      type: \"line\",\n      data: {\n        labels: prepared.map(r => r.__ts),\n        // store timestamps\n        datasets\n      },\n      options: {\n        responsive: true,\n        maintainAspectRatio: false,\n        interaction: {\n          mode: \"index\",\n          intersect: false\n        },\n        plugins: {\n          legend: {\n            display: true\n          },\n          tooltip: {\n            callbacks: {\n              title: items => {\n                var _items$;\n                const v = items === null || items === void 0 ? void 0 : (_items$ = items[0]) === null || _items$ === void 0 ? void 0 : _items$.label;\n                return v ? new Date(Number(v)).toLocaleString() : \"\";\n              }\n            }\n          }\n        },\n        scales: {\n          x: {\n            ticks: {\n              callback: (v, idx, ticks) => {\n                var _ticks$idx;\n                const ts = ticks === null || ticks === void 0 ? void 0 : (_ticks$idx = ticks[idx]) === null || _ticks$idx === void 0 ? void 0 : _ticks$idx.value;\n                return ts ? new Date(Number(ts)).toLocaleDateString() : \"\";\n              },\n              maxRotation: 0,\n              autoSkip: true\n            }\n          },\n          y: {\n            ticks: {\n              precision: 0\n            }\n          }\n        }\n      }\n    });\n\n    // expose chart instance to parent if requested\n    if (chartRef) chartRef.current = chart;\n    return () => {\n      chart.destroy();\n      if (chartRef) chartRef.current = null;\n    };\n  }, [prepared, yKeys, labels, chartRef]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      width: \"100%\",\n      height: \"100%\"\n    },\n    children: /*#__PURE__*/_jsxDEV(\"canvas\", {\n      id: id,\n      ref: canvasRef\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 100,\n    columnNumber: 5\n  }, this);\n}\n_s(LineTimeChart, \"0RjVZ5W4BZG/Grc2UiMddIZUZTI=\");\n_c = LineTimeChart;\nvar _c;\n$RefreshReg$(_c, \"LineTimeChart\");","map":{"version":3,"names":["React","useEffect","useMemo","useRef","Chart","jsxDEV","_jsxDEV","toTs","v","t","Date","getTime","Number","isFinite","LineTimeChart","id","rows","xKey","yKeys","labels","chartRef","_s","canvasRef","prepared","safeRows","Array","isArray","data","map","r","x","ts","__ts","filter","Boolean","sort","a","b","current","existing","getChart","destroy","length","datasets","k","label","_r$k","spanGaps","tension","pointRadius","chart","type","options","responsive","maintainAspectRatio","interaction","mode","intersect","plugins","legend","display","tooltip","callbacks","title","items","_items$","toLocaleString","scales","ticks","callback","idx","_ticks$idx","value","toLocaleDateString","maxRotation","autoSkip","y","precision","style","width","height","children","ref","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/Admin/Desktop/senior-project/web-template-new/frontend/src/components/charts/LineTimeChart.js"],"sourcesContent":["import React, { useEffect, useMemo, useRef } from \"react\";\r\nimport Chart from \"chart.js/auto\";\r\n\r\nfunction toTs(v) {\r\n  const t = new Date(v).getTime();\r\n  return Number.isFinite(t) ? t : null;\r\n}\r\n\r\nexport default function LineTimeChart({\r\n  id,\r\n  rows = [],\r\n  xKey = \"Timestamp\",\r\n  yKeys = [],\r\n  labels = {}, // optional: { yKey: \"Label\" }\r\n  chartRef,    // optional: ref passed from parent for hover sync later\r\n}) {\r\n  const canvasRef = useRef(null);\r\n\r\n  const prepared = useMemo(() => {\r\n    const safeRows = Array.isArray(rows) ? rows : [];\r\n    const data = safeRows\r\n      .map((r) => {\r\n        const x = r?.[xKey];\r\n        const ts = toTs(x);\r\n        if (!ts) return null;\r\n        return { ...r, __ts: ts };\r\n      })\r\n      .filter(Boolean)\r\n      .sort((a, b) => a.__ts - b.__ts);\r\n\r\n    return data;\r\n  }, [rows, xKey]);\r\n\r\n  useEffect(() => {\r\n    if (!canvasRef.current) return;\r\n\r\n    // destroy existing chart if any\r\n    const existing = Chart.getChart(canvasRef.current);\r\n    if (existing) existing.destroy();\r\n\r\n    if (!prepared.length || !yKeys.length) return;\r\n\r\n    const datasets = yKeys.map((k) => ({\r\n      label: labels[k] || k,\r\n      data: prepared.map((r) => Number(r?.[k] ?? null)),\r\n      spanGaps: true,\r\n      tension: 0.3,\r\n      pointRadius: 0,\r\n    }));\r\n\r\n    const chart = new Chart(canvasRef.current, {\r\n      type: \"line\",\r\n      data: {\r\n        labels: prepared.map((r) => r.__ts), // store timestamps\r\n        datasets,\r\n      },\r\n      options: {\r\n        responsive: true,\r\n        maintainAspectRatio: false,\r\n        interaction: { mode: \"index\", intersect: false },\r\n        plugins: {\r\n          legend: { display: true },\r\n          tooltip: {\r\n            callbacks: {\r\n              title: (items) => {\r\n                const v = items?.[0]?.label;\r\n                return v ? new Date(Number(v)).toLocaleString() : \"\";\r\n              },\r\n            },\r\n          },\r\n        },\r\n        scales: {\r\n          x: {\r\n            ticks: {\r\n              callback: (v, idx, ticks) => {\r\n                const ts = ticks?.[idx]?.value;\r\n                return ts ? new Date(Number(ts)).toLocaleDateString() : \"\";\r\n              },\r\n              maxRotation: 0,\r\n              autoSkip: true,\r\n            },\r\n          },\r\n          y: {\r\n            ticks: { precision: 0 },\r\n          },\r\n        },\r\n      },\r\n    });\r\n\r\n    // expose chart instance to parent if requested\r\n    if (chartRef) chartRef.current = chart;\r\n\r\n    return () => {\r\n      chart.destroy();\r\n      if (chartRef) chartRef.current = null;\r\n    };\r\n  }, [prepared, yKeys, labels, chartRef]);\r\n\r\n  return (\r\n    <div style={{ width: \"100%\", height: \"100%\" }}>\r\n      <canvas id={id} ref={canvasRef} />\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}