{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Admin\\\\Desktop\\\\senior-project\\\\website\\\\frontend\\\\src\\\\components\\\\analytics\\\\EnergyMixPie.js\",\n  _s = $RefreshSig$();\n// src/components/analytics/EnergyMixPie.jsx\nimport React, { useMemo } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst num = v => Number.isFinite(Number(v)) ? Number(v) : 0;\nfunction sum(rows, key) {\n  return (rows || []).reduce((a, r) => a + num(r === null || r === void 0 ? void 0 : r[key]), 0);\n}\nfunction polar(cx, cy, r, a) {\n  const rad = (a - 90) * Math.PI / 180;\n  return {\n    x: cx + r * Math.cos(rad),\n    y: cy + r * Math.sin(rad)\n  };\n}\nfunction arcPath(cx, cy, r, startAngle, endAngle) {\n  const s = polar(cx, cy, r, endAngle);\n  const e = polar(cx, cy, r, startAngle);\n  const large = endAngle - startAngle <= 180 ? 0 : 1;\n  return `M ${s.x} ${s.y} A ${r} ${r} 0 ${large} 0 ${e.x} ${e.y} L ${cx} ${cy} Z`;\n}\nexport default function EnergyMixPie({\n  consumptionRows,\n  productionRows,\n  solarRows\n}) {\n  _s();\n  const {\n    parts,\n    total\n  } = useMemo(() => {\n    // 7-day window based on what you pass (you can slice before passing if you want)\n    const cons = sum(consumptionRows, \"Total_Consumption\");\n    const prod = sum(productionRows, \"Total_Production\");\n    const solar = sum(solarRows, \"Total_Energy_Generated\");\n\n    // Simple “mix”:\n    // - Solar portion: solar (capped to consumption if you want)\n    // - Grid portion: max(cons - solar, 0)\n    // - Excess (if producing more than consuming): max(prod - cons, 0)\n    const solarUsed = Math.min(solar, cons);\n    const grid = Math.max(cons - solarUsed, 0);\n    const excess = Math.max(prod - cons, 0);\n    const parts = [{\n      label: \"Solar Used\",\n      value: solarUsed\n    }, {\n      label: \"From Grid\",\n      value: grid\n    }, {\n      label: \"Excess Production\",\n      value: excess\n    }].filter(p => p.value > 0);\n    const total = parts.reduce((a, p) => a + p.value, 0) || 1;\n    return {\n      parts,\n      total\n    };\n  }, [consumptionRows, productionRows, solarRows]);\n  const cx = 80,\n    cy = 80,\n    r = 70;\n  let angle = 0;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      display: \"flex\",\n      gap: 18,\n      alignItems: \"center\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n      width: \"160\",\n      height: \"160\",\n      viewBox: \"0 0 160 160\",\n      children: [parts.map((p, i) => {\n        const start = angle;\n        const sweep = p.value / total * 360;\n        const end = start + sweep;\n        angle = end;\n\n        // no hardcoded colors; use CSS-ish opacity variations\n        const fill = i === 0 ? \"rgba(255,255,255,0.75)\" : i === 1 ? \"rgba(255,255,255,0.45)\" : \"rgba(255,255,255,0.25)\";\n        return /*#__PURE__*/_jsxDEV(\"path\", {\n          d: arcPath(cx, cy, r, start, end),\n          fill: fill\n        }, p.label, false, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 18\n        }, this);\n      }), /*#__PURE__*/_jsxDEV(\"circle\", {\n        cx: cx,\n        cy: cy,\n        r: 42,\n        fill: \"rgba(0,0,0,0.35)\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"text\", {\n        x: cx,\n        y: cy,\n        textAnchor: \"middle\",\n        dominantBaseline: \"middle\",\n        fill: \"white\",\n        fontSize: \"12\",\n        children: \"Mix\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: \"grid\",\n        gap: 8\n      },\n      children: parts.map((p, i) => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"muted\",\n        style: {\n          fontSize: 13\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"b\", {\n          style: {\n            color: \"inherit\"\n          },\n          children: [p.label, \":\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 13\n        }, this), \" \", p.value.toFixed(2), \" kWh (\", (p.value / total * 100).toFixed(0), \"%)\"]\n      }, p.label, true, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 51,\n    columnNumber: 5\n  }, this);\n}\n_s(EnergyMixPie, \"b0dSIuAYOAqGHuj/++nlE4AZRg4=\");\n_c = EnergyMixPie;\nvar _c;\n$RefreshReg$(_c, \"EnergyMixPie\");","map":{"version":3,"names":["React","useMemo","jsxDEV","_jsxDEV","num","v","Number","isFinite","sum","rows","key","reduce","a","r","polar","cx","cy","rad","Math","PI","x","cos","y","sin","arcPath","startAngle","endAngle","s","e","large","EnergyMixPie","consumptionRows","productionRows","solarRows","_s","parts","total","cons","prod","solar","solarUsed","min","grid","max","excess","label","value","filter","p","angle","style","display","gap","alignItems","children","width","height","viewBox","map","i","start","sweep","end","fill","d","fileName","_jsxFileName","lineNumber","columnNumber","textAnchor","dominantBaseline","fontSize","className","color","toFixed","_c","$RefreshReg$"],"sources":["C:/Users/Admin/Desktop/senior-project/website/frontend/src/components/analytics/EnergyMixPie.js"],"sourcesContent":["// src/components/analytics/EnergyMixPie.jsx\r\nimport React, { useMemo } from \"react\";\r\n\r\nconst num = (v) => (Number.isFinite(Number(v)) ? Number(v) : 0);\r\n\r\nfunction sum(rows, key) {\r\n  return (rows || []).reduce((a, r) => a + num(r?.[key]), 0);\r\n}\r\n\r\nfunction polar(cx, cy, r, a) {\r\n  const rad = ((a - 90) * Math.PI) / 180;\r\n  return { x: cx + r * Math.cos(rad), y: cy + r * Math.sin(rad) };\r\n}\r\n\r\nfunction arcPath(cx, cy, r, startAngle, endAngle) {\r\n  const s = polar(cx, cy, r, endAngle);\r\n  const e = polar(cx, cy, r, startAngle);\r\n  const large = endAngle - startAngle <= 180 ? 0 : 1;\r\n  return `M ${s.x} ${s.y} A ${r} ${r} 0 ${large} 0 ${e.x} ${e.y} L ${cx} ${cy} Z`;\r\n}\r\n\r\nexport default function EnergyMixPie({ consumptionRows, productionRows, solarRows }) {\r\n  const { parts, total } = useMemo(() => {\r\n    // 7-day window based on what you pass (you can slice before passing if you want)\r\n    const cons = sum(consumptionRows, \"Total_Consumption\");\r\n    const prod = sum(productionRows, \"Total_Production\");\r\n    const solar = sum(solarRows, \"Total_Energy_Generated\");\r\n\r\n    // Simple “mix”:\r\n    // - Solar portion: solar (capped to consumption if you want)\r\n    // - Grid portion: max(cons - solar, 0)\r\n    // - Excess (if producing more than consuming): max(prod - cons, 0)\r\n    const solarUsed = Math.min(solar, cons);\r\n    const grid = Math.max(cons - solarUsed, 0);\r\n    const excess = Math.max(prod - cons, 0);\r\n\r\n    const parts = [\r\n      { label: \"Solar Used\", value: solarUsed },\r\n      { label: \"From Grid\", value: grid },\r\n      { label: \"Excess Production\", value: excess },\r\n    ].filter((p) => p.value > 0);\r\n\r\n    const total = parts.reduce((a, p) => a + p.value, 0) || 1;\r\n    return { parts, total };\r\n  }, [consumptionRows, productionRows, solarRows]);\r\n\r\n  const cx = 80, cy = 80, r = 70;\r\n  let angle = 0;\r\n\r\n  return (\r\n    <div style={{ display: \"flex\", gap: 18, alignItems: \"center\" }}>\r\n      <svg width=\"160\" height=\"160\" viewBox=\"0 0 160 160\">\r\n        {parts.map((p, i) => {\r\n          const start = angle;\r\n          const sweep = (p.value / total) * 360;\r\n          const end = start + sweep;\r\n          angle = end;\r\n\r\n          // no hardcoded colors; use CSS-ish opacity variations\r\n          const fill = i === 0 ? \"rgba(255,255,255,0.75)\"\r\n                     : i === 1 ? \"rgba(255,255,255,0.45)\"\r\n                     : \"rgba(255,255,255,0.25)\";\r\n\r\n          return <path key={p.label} d={arcPath(cx, cy, r, start, end)} fill={fill} />;\r\n        })}\r\n\r\n        {/* donut hole */}\r\n        <circle cx={cx} cy={cy} r={42} fill=\"rgba(0,0,0,0.35)\" />\r\n        <text x={cx} y={cy} textAnchor=\"middle\" dominantBaseline=\"middle\" fill=\"white\" fontSize=\"12\">\r\n          Mix\r\n        </text>\r\n      </svg>\r\n\r\n      <div style={{ display: \"grid\", gap: 8 }}>\r\n        {parts.map((p, i) => (\r\n          <div key={p.label} className=\"muted\" style={{ fontSize: 13 }}>\r\n            <b style={{ color: \"inherit\" }}>{p.label}:</b>{\" \"}\r\n            {p.value.toFixed(2)} kWh ({((p.value / total) * 100).toFixed(0)}%)\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}