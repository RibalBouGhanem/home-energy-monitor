{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Admin\\\\Desktop\\\\senior-project\\\\website\\\\frontend\\\\src\\\\components\\\\charts\\\\BarTimeChart.js\",\n  _s = $RefreshSig$();\n// src/components/charts/BarTimeChart.js\nimport React, { useEffect, useMemo, useRef } from \"react\";\nimport Chart from \"chart.js/auto\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction toTs(v) {\n  try {\n    return new Date(v).getTime();\n  } catch {\n    return null;\n  }\n}\nexport default function BarTimeChart({\n  id,\n  rows = [],\n  xKey = \"Timestamp\",\n  yKeys = [],\n  labels = {},\n  // optional: { yKey: \"Label\" }\n  chartRef // optional\n}) {\n  _s();\n  const canvasRef = useRef(null);\n  const prepared = useMemo(() => {\n    const safeRows = Array.isArray(rows) ? rows : [];\n    return safeRows.map(r => {\n      const ts = toTs(r === null || r === void 0 ? void 0 : r[xKey]);\n      if (!ts) return null;\n      return {\n        ...r,\n        __ts: ts\n      };\n    }).filter(Boolean).sort((a, b) => a.__ts - b.__ts);\n  }, [rows, xKey]);\n  useEffect(() => {\n    if (!canvasRef.current) return;\n    const existing = Chart.getChart(canvasRef.current);\n    if (existing) existing.destroy();\n    if (!prepared.length || !yKeys.length) return;\n    const datasets = yKeys.map(k => ({\n      label: labels[k] || k,\n      data: prepared.map(r => {\n        var _r$k;\n        return Number((_r$k = r === null || r === void 0 ? void 0 : r[k]) !== null && _r$k !== void 0 ? _r$k : null);\n      }),\n      borderWidth: 1\n      // don't hardcode colors; Chart.js will default\n    }));\n    const chart = new Chart(canvasRef.current, {\n      type: \"bar\",\n      data: {\n        labels: prepared.map(r => r.__ts),\n        datasets\n      },\n      options: {\n        responsive: true,\n        maintainAspectRatio: false,\n        interaction: {\n          mode: \"index\",\n          intersect: false\n        },\n        plugins: {\n          legend: {\n            display: true\n          },\n          tooltip: {\n            callbacks: {\n              title: items => {\n                var _items$;\n                const v = items === null || items === void 0 ? void 0 : (_items$ = items[0]) === null || _items$ === void 0 ? void 0 : _items$.label;\n                return v ? new Date(Number(v)).toLocaleDateString() : \"\";\n              }\n            }\n          }\n        },\n        scales: {\n          x: {\n            ticks: {\n              callback: (_value, index) => {\n                var _prepared$index;\n                const ts = (_prepared$index = prepared[index]) === null || _prepared$index === void 0 ? void 0 : _prepared$index.__ts;\n                return ts ? new Date(ts).toLocaleDateString() : \"\";\n              },\n              maxRotation: 0,\n              autoSkip: true\n            }\n          },\n          y: {\n            ticks: {\n              precision: 0\n            }\n          }\n        }\n      }\n    });\n    if (chartRef) chartRef.current = chart;\n    return () => {\n      chart.destroy();\n      if (chartRef) chartRef.current = null;\n    };\n  }, [prepared, yKeys, labels]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      width: \"100%\",\n      height: \"100%\"\n    },\n    children: /*#__PURE__*/_jsxDEV(\"canvas\", {\n      id: id,\n      ref: canvasRef\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 98,\n    columnNumber: 5\n  }, this);\n}\n_s(BarTimeChart, \"0RjVZ5W4BZG/Grc2UiMddIZUZTI=\");\n_c = BarTimeChart;\nvar _c;\n$RefreshReg$(_c, \"BarTimeChart\");","map":{"version":3,"names":["React","useEffect","useMemo","useRef","Chart","jsxDEV","_jsxDEV","toTs","v","Date","getTime","BarTimeChart","id","rows","xKey","yKeys","labels","chartRef","_s","canvasRef","prepared","safeRows","Array","isArray","map","r","ts","__ts","filter","Boolean","sort","a","b","current","existing","getChart","destroy","length","datasets","k","label","data","_r$k","Number","borderWidth","chart","type","options","responsive","maintainAspectRatio","interaction","mode","intersect","plugins","legend","display","tooltip","callbacks","title","items","_items$","toLocaleDateString","scales","x","ticks","callback","_value","index","_prepared$index","maxRotation","autoSkip","y","precision","style","width","height","children","ref","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/Admin/Desktop/senior-project/website/frontend/src/components/charts/BarTimeChart.js"],"sourcesContent":["// src/components/charts/BarTimeChart.js\r\nimport React, { useEffect, useMemo, useRef } from \"react\";\r\nimport Chart from \"chart.js/auto\";\r\n\r\nfunction toTs(v) {\r\n  try {\r\n    return new Date(v).getTime();\r\n  } catch {\r\n    return null;\r\n  }\r\n}\r\n\r\nexport default function BarTimeChart({\r\n  id,\r\n  rows = [],\r\n  xKey = \"Timestamp\",\r\n  yKeys = [],\r\n  labels = {}, // optional: { yKey: \"Label\" }\r\n  chartRef,    // optional\r\n}) {\r\n  const canvasRef = useRef(null);\r\n\r\n  const prepared = useMemo(() => {\r\n    const safeRows = Array.isArray(rows) ? rows : [];\r\n    return safeRows\r\n      .map((r) => {\r\n        const ts = toTs(r?.[xKey]);\r\n        if (!ts) return null;\r\n        return { ...r, __ts: ts };\r\n      })\r\n      .filter(Boolean)\r\n      .sort((a, b) => a.__ts - b.__ts);\r\n  }, [rows, xKey]);\r\n\r\n  useEffect(() => {\r\n    if (!canvasRef.current) return;\r\n\r\n    const existing = Chart.getChart(canvasRef.current);\r\n    if (existing) existing.destroy();\r\n\r\n    if (!prepared.length || !yKeys.length) return;\r\n\r\n    const datasets = yKeys.map((k) => ({\r\n      label: labels[k] || k,\r\n      data: prepared.map((r) => Number(r?.[k] ?? null)),\r\n      borderWidth: 1,\r\n      // don't hardcode colors; Chart.js will default\r\n    }));\r\n\r\n    const chart = new Chart(canvasRef.current, {\r\n      type: \"bar\",\r\n      data: {\r\n        labels: prepared.map((r) => r.__ts),\r\n        datasets,\r\n      },\r\n      options: {\r\n        responsive: true,\r\n        maintainAspectRatio: false,\r\n        interaction: { mode: \"index\", intersect: false },\r\n        plugins: {\r\n          legend: { display: true },\r\n          tooltip: {\r\n            callbacks: {\r\n              title: (items) => {\r\n                const v = items?.[0]?.label;\r\n                return v ? new Date(Number(v)).toLocaleDateString() : \"\";\r\n              },\r\n            },\r\n          },\r\n        },\r\n        scales: {\r\n          x: {\r\n            ticks: {\r\n              callback: (_value, index) => {\r\n                const ts = prepared[index]?.__ts;\r\n                return ts ? new Date(ts).toLocaleDateString() : \"\";\r\n              },\r\n              maxRotation: 0,\r\n              autoSkip: true,\r\n            },\r\n          },\r\n          y: {\r\n            ticks: { precision: 0 },\r\n          },\r\n        },\r\n      },\r\n    });\r\n\r\n    if (chartRef) chartRef.current = chart;\r\n\r\n    return () => {\r\n      chart.destroy();\r\n      if (chartRef) chartRef.current = null;\r\n    };\r\n  }, [prepared, yKeys, labels]);\r\n\r\n  return (\r\n    <div style={{ width: \"100%\", height: \"100%\" }}>\r\n      <canvas id={id} ref={canvasRef} />\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}